angular.module('app.filters', []);
angular.module('app.views', []);
angular.module('app.constants', []);
angular.module('app.directives', ['infinite-scroll', 'app.filters']);
angular.module('app.services', ['app.constants', 'ngResource']);

var app = angular.module('app', ['app.services', 'app.directives', 'app.views', 'app.filters', 'ngRoute']);

app.config(["$routeProvider", function($routeProvider) {
    $routeProvider.when('/', { templateUrl : 'profile-details.html' });
}]);

/* globals angular:false */

var constants;
constants = angular.module('app.constants');

constants.constant('FLICKR_API', 'https://api.flickr.com/services/rest/');

constants.constant('FLICKR_KEY', '2ff958264d0f285beac52b51a3fd2247');

/* globals angular:false */

var constants;
constants = angular.module('app.constants');

constants.constant('TWITTER_API', 'http://localhost:3000');

constants.constant('TWITTER_QUANTITY_TWEETS_GET', 10);

var app = angular.module('app.directives');

app.controller('profileDetailsController', ["$q", "helpService", "twitter", function profileDetailsController($q, helpService, twitter) {

    $q.all([twitter.getTweets(), twitter.getUser()]).then(helpService.spread(function (tweets, user) {
        this.tweets = tweets;
        this.user = user;
    }.bind(this)));

    this.moreTweets = function moreTweets() {
        twitter.moreTweets(this.tweets);
    };

}]);
var filters = angular.module('app.filters');

filters.filter('hashtag', function() {
    return function (hash) {
        return hash ? '#' + hash : '';
    };
});
var filters = angular.module('app.filters');

filters.filter('removeText', function() {
    return function (text, remove) {
        return text ? text.replace(remove, '') : '';
    };
});
var filters = angular.module('app.filters');

filters.filter('screenName', function() {
    return function (userScreenName) {
        return userScreenName ? '@' + userScreenName : '';
    };
});
/* globals angular:false */

var services;
services = angular.module('app.services');

services.factory('FlickrService', ["$resource", "FLICKR_API", "FLICKR_KEY", function FlickrService($resource, FLICKR_API, FLICKR_KEY) {
    return $resource(FLICKR_API, {}, {
        photos: {
            method: 'GET',
            url: FLICKR_API,
            isArray: false,
            params: {
                method: 'flickr.photos.search',
                api_key: FLICKR_KEY,
                page: 1,
                format: 'json',
                nojsoncallback: 1,
                per_page: 1
            }
        }
    });
}]);

services.factory('flickr', ["FlickrService", function flickr(FlickrService) {
    return {
        getPhotos: function getPhotos(tags) {
            return FlickrService.photos({ tags: tags }).$promise;
        },
        getPhotoUrl: function getPhotoUrl(photo) {
            return 'https://farm' + photo.farm + '.staticflickr.com/' + photo.server + '/' + photo.id + '_' + photo.secret + '.jpg';
        }
    }
}]);
var services;
services = angular.module('app.services');

services.factory('helpService', function helpService() {

    return {
        first: function first(collection) {
            return collection[0];
        },
        last: function last(collection) {
            return collection[collection.length - 1];
        },
        random: function ramdom(limMax) {
            return Math.floor((Math.random() * limMax) + 1);
        },
        spread: function spread(func) {
            return function(array) {
                return func.apply(this, array);
            };
        }
    }

});
/* globals angular:false */

var services;
services = angular.module('app.services');

services.factory('TwitterService', ["$resource", "TWITTER_API", function TwitterService($resource, TWITTER_API) {
    return $resource(TWITTER_API, {}, {
        tweets: {
            method: 'GET',
            url: TWITTER_API + '/tweets',
            isArray: true
        },
        user: {
            method: 'GET',
            url: TWITTER_API + '/user',
            isArray: false
        }
    });
}]);

services.factory('twitter', ["helpService", "TwitterService", "TWITTER_QUANTITY_TWEETS_GET", function twitter(helpService, TwitterService, TWITTER_QUANTITY_TWEETS_GET) {
    
    return {
        _readingTweets: false,
        moreTweets: function moreTweets(arrayTweets) {
            if (this._readingTweets) return;
            var max_id = (helpService.last(arrayTweets)).id;
            this._readingTweets = true;
            this.getTweets(TWITTER_QUANTITY_TWEETS_GET + 1, max_id).then(function(response) {
                response.shift();
                for (var index = 0; index < response.length; index++) arrayTweets.push(response[index]);
                this._readingTweets = false;
            }.bind(this)).catch(function() {
                this._readingTweets = false;
            }.bind(this));
        },
        getTweets: function(count, maxId) {
            if (!count) count = TWITTER_QUANTITY_TWEETS_GET;
            return TwitterService.tweets({ count: count, max_id: maxId }).$promise;
        },
        getUser: function getUser() {
            return TwitterService.user().$promise;
        }
    }

}]);

var app = angular.module('app.directives');

app.directive('followersKnow', function followersKnow() {

    return {
        restrict : 'E',
        template : [
            '<div class="col-md-3 profile-photos">',
            '   <img class="profile-photos-img" src="images/followers-know.png" />',
            '</div>'
        ].join('')
    };

});
var app = angular.module('app.directives');

app.directive('profileFollowersKnow', function profileFollowersKnow() {

    return {
        restrict : 'E',
        scope: {},
        template : [
            '<section class="profile-photos-container">',
            '   <header class="profile-photos-header">',
            '       <span><i class="fa fa-user" aria-hidden="true"></i> {{ ctrl.followers.length }} Followers you know</span>',
            '   </header>',
            '   <section>',
            '       <followers-know ng-repeat="follow in ctrl.followers track by $index"></followers-know>',
            '   </section>',
            '</section>'
        ].join(''),
        controllerAs: 'ctrl',
        controller: ["helpService", function profileFollowersKnowController(helpService) {

            this.followers = new Array(helpService.random(16));

        }]
    };

});
var app = angular.module('app.directives');

app.directive('navbarIcon', function navbarIcon() {

    return {
        restrict : 'E',
        template : [
            '<i class="fa fa-2x fa-twitter navbar-icon" aria-hidden="true"></i>'
        ].join('')
    };

});
var app = angular.module('app.directives');

app.directive('navbarOption', function navbarOption() {

    return {
        restrict : 'E',
        replace: true,
        scope: {},
        template : [
            '<li>',
            '   <a href="#">',
            '       <span class="glyphicon glyphicon-home" aria-hidden="true"></span>',
            '       {{ title }}',
            '   </a>',
            '</li>'
        ].join(''),
        link: function link(scope, element, attrs) {
            scope.title = attrs.title;
        }
    };

});
var app = angular.module('app.directives');

app.directive('navbarSearch', function navbarSearch() {

    return {
        restrict : 'E',
        template : [
            '<form>',
            '   <input type="text" class="form-control mod-search" placeholder="Search Twitter" />',
            '</form>'
        ].join('')
    };

});
var app = angular.module('app.directives');

app.directive('photosVideos', function photosVideos() {

    return {
        restrict : 'E',
        template : [
            '<div class="col-md-4 profile-photos">',
            '   <img class="profile-photos-img" src="images/photo-and-videos.jpg" />',
            '</div>'
        ].join('')
    };

});
var app = angular.module('app.directives');

app.directive('profilePhotosVideos', function profilePhotosVideos() {

    return {
        restrict : 'E',
        scope: {},
        template : [
            '<section class="profile-photos-container">',
            '   <header class="profile-photos-header">',
            '       <span><i class="fa fa-camera" aria-hidden="true"></i> {{ ctrl.photos.length }} photos and videos</span>',
            '   </header>',
            '   <section>',
            '       <photos-videos ng-repeat="photo in ctrl.photos track by $index"></photos-videos>',
            '   </section>',
            '</section>'
        ].join(''),
        controllerAs: 'ctrl',
        controller: ["helpService", function profilePhotosVideosController(helpService) {

            this.photos = new Array(helpService.random(9));

        }]
    };

});
var app = angular.module('app.directives');

app.directive('profileCount', function profileCount() {

    return {
        restrict : 'E',
        scope: {
            count: '='
        },
        template : [
            '   <article class="profile-count">',
            '       <div class="row">',
            '           <span class="profile-count-title">{{ title }}</span>',
            '       </div>',
            '       <div class="row">',
            '           <span class="profile-count-data">{{ count }}</span>',
            '       </div>',
            '   </article>'
        ].join(''),
        link: function link(scope, element, attrs) {
            scope.title = attrs.title;
            if (attrs.active) element.find('article').addClass('mod-active');
        }
    };

});
var app = angular.module('app.directives');

app.directive('profileImg', ["$filter", function profileImg($filter) {

    return {
        restrict : 'E',
        scope: {
            link: '='
        },
        template : [
            '<img ng-src="{{ link }}" />'
        ].join(''),
        link: function link(scope, element, attrs) {

            element.find('img').addClass(attrs.classImg);

            var stopWatch = scope.$watch(function () {
                return scope.link;
            }, function () {
                if (!scope.link) return;
                if (attrs.removeText) scope.link = $filter('removeText')(scope.link, attrs.removeText);
                stopWatch();
            });

        }
    };

}]);
var app = angular.module('app.directives');

app.directive('profileTrends', function profileTrends() {

    return {
        restrict : 'E',
        template : [
            '<section class="profile-trends-container col-md-12">',
            '   <header class="profile-trends-container-header">',
            '       Trends',
            '   </header>',
            '   <section>',
            '       <trend hash="AngularJS" count="2,147"></trend>',
            '       <trend hash="React" count="4,303"></trend>',
            '       <trend hash="FelippeNaB2W" count="1,906"></trend>',
            '       <trend hash="B2WDigital" count="7,987"></trend>',
            '       <trend hash="FrontEndCarioca" count="208"></trend>',
            '       <trend hash="FrontInRio" count="243"></trend>',
            '       <trend hash="SubmarinoCom" count="86,456"></trend>',
            '       <trend hash="BlackFriday" count="347"></trend>',
            '       <trend hash="B2WInterview" count="9,651"></trend>',
            '       <trend hash="JavaScriptS2" count="234"></trend>',
            '   </section>',
            '</section>'
        ].join('')
    };

});
var app = angular.module('app.directives');

app.directive('trend', function trend() {

    return {
        restrict : 'E',
        scope: {},
        template : [
            '<div class="col-md-12 profile-trend">',
            '   <div class="row">',
            '       <span class="profile-trend-hashtag">{{ hash | hashtag }}</span>',
            '   </div>',
            '   <div class="row">',
            '       <span class="profile-trend-count">{{ count }} Tweets</span>',
            '   </div>',
            '</div>'
        ].join(''),
        link: function link(scope, element, attrs) {
            scope.hash = attrs.hash;
            scope.count = attrs.count;
        }
    };

});
var app = angular.module('app.directives');

app.directive('profileTweets', function profileTweets() {

    return {
        restrict : 'E',
        scope: {
            tweets: '='
        },
        template : [
            '<section class="col-md-12 col-sm-12 col-xs-12 profile-tweets-container">',
            '   <header class="profile-tweets-header">',
            '       <tweets-header-option text="Tweets"></tweets-header-option>',
            '       <tweets-header-option text="Tweets & replies" active="true"></tweets-header-option>',
            '       <tweets-header-option text="Media"></tweets-header-option>',
            '   </header>',
            '   <section>',
            '       <tweet ng-repeat="tweet in tweets track by $index" tweet="tweet"></tweet>',
            '   </section>',
            '   <div infinite-scroll="moreTweets()" infinite-scroll-distance="0"></div>',
            '</section>'
        ].join(''),
        link: function link(scope) {

            scope.moreTweets = function moreTweets() {
                if (!scope.tweets) return;
                scope.$parent.ctrl.moreTweets();
            };

        }
    };

});
var app = angular.module('app.directives');

app.directive('tweetsHeaderOption', function tweetsHeaderOption() {

    return {
        restrict : 'E',
        scope: {},
        template : [
            '<section class="profile-tweets-option">',
            '   <span>{{ text }}</span>',
            '</section>'
        ].join(''),
        link: function link(scope, element, attrs) {
            scope.text = attrs.text;
            if (attrs.active) element.find('section').addClass('mod-active');
        }
    };

});
var app = angular.module('app.directives');

app.directive('profileInfoIcon', function profileInfoIcon() {

    return {
        restrict : 'E',
        scope: {
            text: '='
        },
        template : [
            '<div class="row profile-info-name profile-info-data">',
            '   <i class="fa" ng-class="icon" aria-hidden="true"></i>',
            '   <span>{{ text }}</span>',
            '</div>'
        ].join(''),
        link: function link(scope, element, attrs) {
            scope.icon = attrs.icon;
            if (attrs.isLink) element.find('span').addClass('profile-info-description-url');
        }
    };

});

var app = angular.module('app.directives');

app.directive('profileInfo', function profileInfo() {

    return {
        restrict : 'E',
        priority: 1,
        scope: {
            user: '='
        },
        template : [
            '<section class="profile-info-container">',
            '   <article>',
            '       <div class="row profile-info-name">',
            '           <span class="profile-info-name-title">{{ user.name }}</span>',
            '       </div>',
            '       <div class="row profile-info-name">',
            '           <span class="profile-info-name-at">{{ user.screen_name | screenName }}</span>',
            '       </div>',
            '   </article>',
            '   <article class="profile-info-description-container">',
            '       <div class="row profile-info-name">',
            '           <span>{{ user.description }}</span>',
            '       </div>',
            '   </article>',
            '   <article class="profile-info-description-container">',
            '       <profile-info-icon icon="fa-map-marker" text="user.location"></profile-info-icon>',
            '       <profile-info-icon icon="fa-link" text="user.name" is-link="true"></profile-info-icon>',
            '       <profile-info-icon icon="fa-calendar" text="user.created_at"></profile-info-icon>',
            '   </article>',
            '   <article class="profile-info-description-container">',
            '       <button class="btn btn-tweet btn-full">',
            '           <i class="fa fa-pencil-square-o" aria-hidden="true"></i>',
            '           <span>Tweet to {{ user.name }}</span>',
            '       </button>',
            '   </article>',
            '</section>'
        ].join('')
    };

});
var app = angular.module('app.directives');

app.directive('tweetIcon', function tweetIcon() {

    return {
        restrict : 'E',
        scope: {
            value: '='
        },
        template : [
            '<i class="fa" ng-class="icon" aria-hidden="true">',
            '   <span class="tweet-main-icons-value" ng-if="value">{{ value }}</span>',
            '</i>'
        ].join(''),
        link: function link(scope, element, attrs) {
            scope.icon = attrs.icon;
        }
    };

});
var app = angular.module('app.directives');

app.directive('tweetImage', ["flickr", "helpService", function tweetImage(flickr, helpService) {

    return {
        restrict : 'E',
        scope: {
            tweet: '='
        },
        template : [
            '<div class="row" ng-if="url">',
            '   <img class="profile-tweet-image" ng-src="{{ url }}" />',
            '</div>'
        ].join(''),
        link: function link(scope) {

            if (scope.tweet.entities.hashtags.length) {
                var tag = helpService.first(scope.tweet.entities.hashtags).text;
                flickr.getPhotos(tag).then(function (response) {
                    scope.url = flickr.getPhotoUrl(helpService.first(response.photos.photo));
                });
            } else if (scope.tweet.entities.media && scope.tweet.entities.media.length) {
                scope.url = helpService.first(scope.tweet.entities.media).media_url;
            }

        }
    };

}]);
var app = angular.module('app.directives');

app.directive('tweet', function tweet() {

    return {
        restrict : 'E',
        scope: {
            tweet: '='
        },
        template : [
            '<article class="tweet-container col-md-12 col-sm-12 col-xs-12">',
            '   <aside class="col-md-2 col-sm-2 tweet-img-container hidden-xs">',
            '       <img class="tweet-img" ng-src="{{ tweet.user.profile_image_url }}" />',
            '   </aside>',
            '   <main class="col-md-10 col-sm-10 col-xs-10 tweet-main-container">',
            '       <div class="row tweet-main-reply" ng-if="tweet.entities.user_mentions.length">',
            '           <span><i class="fa fa-reply hidden-xs icon-reply" aria-hidden="true"></i>In reply to {{ tweet.entities.user_mentions[0].name }}</span>',
            '       </div>',
            '       <div class="row tweet-main-profile-container">',
            '           <span class="tweet-main-profile-name">{{ tweet.user.name }}</span>',
            '           <span class="tweet-main-profile-at">{{ tweet.user.screen_name | screenName }}</span>',
            '       </div>',
            '       <div class="row tweet-main">',
            '           <span>{{ tweet.text }}</span>',
            '       </div>',
            '       <tweet-image tweet="tweet"></tweet-image>',
            '       <div class="row tweet-main-icons">',
            '           <tweet-icon icon="fa-reply" value="tweet.entities.user_mentions.length"></tweet-icon>',
            '           <tweet-icon icon="fa-retweet" value="tweet.retweet_count"></tweet-icon>',
            '           <tweet-icon icon="fa-heart" value="tweet.favorite_count"></tweet-icon>',
            '           <tweet-icon icon="fa-ellipsis-h"></tweet-icon>',
            '       </div>',
            '   </main>',
            '</article>'
        ].join('')
    };

});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9hcHAuanMiLCIvY29uc3RhbnRzL2ZsaWNrci5qcyIsIi9jb25zdGFudHMvdHdpdHRlci5qcyIsIi9jb250cm9sbGVyL3Byb2ZpbGUtZGV0YWlscy5qcyIsIi9maWx0ZXIvaGFzaHRhZy5qcyIsIi9maWx0ZXIvcmVtb3ZlLXRleHQuanMiLCIvZmlsdGVyL3NjcmVlbi1uYW1lLmpzIiwiL3NlcnZpY2VzL2ZsaWNrci5qcyIsIi9zZXJ2aWNlcy9oZWxwLmpzIiwiL3NlcnZpY2VzL3R3aXR0ZXIuanMiLCIvZGlyZWN0aXZlcy9mb2xsb3dlcnMta25vdy9mb2xsb3dlcnMta25vdy5qcyIsIi9kaXJlY3RpdmVzL2ZvbGxvd2Vycy1rbm93L3Byb2ZpbGUtZm9sbG93ZXJzLWtub3cuanMiLCIvZGlyZWN0aXZlcy9uYXZiYXIvbmF2YmFyLWljb24uanMiLCIvZGlyZWN0aXZlcy9uYXZiYXIvbmF2YmFyLW9wdGlvbi5qcyIsIi9kaXJlY3RpdmVzL25hdmJhci9uYXZiYXItc2VhcmNoLmpzIiwiL2RpcmVjdGl2ZXMvcGhvdG9zLXZpZGVvcy9waG90b3MtdmlkZW9zLmpzIiwiL2RpcmVjdGl2ZXMvcGhvdG9zLXZpZGVvcy9wcm9maWxlLXBob3Rvcy12aWRlb3MuanMiLCIvZGlyZWN0aXZlcy9wcm9maWxlL3Byb2ZpbGUtY291bnQuanMiLCIvZGlyZWN0aXZlcy9wcm9maWxlL3Byb2ZpbGUtaW1nLmpzIiwiL2RpcmVjdGl2ZXMvdHJlbmRzL3Byb2ZpbGUtdHJlbmRzLmpzIiwiL2RpcmVjdGl2ZXMvdHJlbmRzL3RyZW5kLmpzIiwiL2RpcmVjdGl2ZXMvdHdlZXRzL3Byb2ZpbGUtdHdlZXRzLmpzIiwiL2RpcmVjdGl2ZXMvdHdlZXRzL3R3ZWV0cy1oZWFkZXItb3B0aW9uLmpzIiwiL2RpcmVjdGl2ZXMvcHJvZmlsZS9pbmZvL3Byb2ZpbGUtaW5mby1pY29uLmpzIiwiL2RpcmVjdGl2ZXMvcHJvZmlsZS9pbmZvL3Byb2ZpbGUtaW5mby5qcyIsIi9kaXJlY3RpdmVzL3R3ZWV0cy90d2VldC90d2VldC1pY29uLmpzIiwiL2RpcmVjdGl2ZXMvdHdlZXRzL3R3ZWV0L3R3ZWV0LWltYWdlLmpzIiwiL2RpcmVjdGl2ZXMvdHdlZXRzL3R3ZWV0L3R3ZWV0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFFBQUEsT0FBQSxlQUFBO0FBQ0EsUUFBQSxPQUFBLGFBQUE7QUFDQSxRQUFBLE9BQUEsaUJBQUE7QUFDQSxRQUFBLE9BQUEsa0JBQUEsQ0FBQSxtQkFBQTtBQUNBLFFBQUEsT0FBQSxnQkFBQSxDQUFBLGlCQUFBOztBQUVBLElBQUEsTUFBQSxRQUFBLE9BQUEsT0FBQSxDQUFBLGdCQUFBLGtCQUFBLGFBQUEsZUFBQTs7QUFFQSxJQUFBLDBCQUFBLFNBQUEsZ0JBQUE7SUFDQSxlQUFBLEtBQUEsS0FBQSxFQUFBLGNBQUE7Ozs7O0FDUEEsSUFBQTtBQUNBLFlBQUEsUUFBQSxPQUFBOztBQUVBLFVBQUEsU0FBQSxjQUFBOztBQUVBLFVBQUEsU0FBQSxjQUFBOzs7O0FDTEEsSUFBQTtBQUNBLFlBQUEsUUFBQSxPQUFBOztBQUVBLFVBQUEsU0FBQSxlQUFBOztBQUVBLFVBQUEsU0FBQSwrQkFBQTs7QUNQQSxJQUFBLE1BQUEsUUFBQSxPQUFBOztBQUVBLElBQUEsV0FBQSw2REFBQSxTQUFBLHlCQUFBLElBQUEsYUFBQSxTQUFBOztJQUVBLEdBQUEsSUFBQSxDQUFBLFFBQUEsYUFBQSxRQUFBLFlBQUEsS0FBQSxZQUFBLE9BQUEsVUFBQSxRQUFBLE1BQUE7UUFDQSxLQUFBLFNBQUE7UUFDQSxLQUFBLE9BQUE7TUFDQSxLQUFBOztJQUVBLEtBQUEsYUFBQSxTQUFBLGFBQUE7UUFDQSxRQUFBLFdBQUEsS0FBQTs7OztBQ1ZBLElBQUEsVUFBQSxRQUFBLE9BQUE7O0FBRUEsUUFBQSxPQUFBLFdBQUEsV0FBQTtJQUNBLE9BQUEsVUFBQSxNQUFBO1FBQ0EsT0FBQSxPQUFBLE1BQUEsT0FBQTs7O0FDSkEsSUFBQSxVQUFBLFFBQUEsT0FBQTs7QUFFQSxRQUFBLE9BQUEsY0FBQSxXQUFB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QSxPQUFBOzs7Ozs7QUNwQkEsSUFBQSxNQUFBLFFBQUEsT0FBQTs7QUFFQSxJQUFBLFVBQUEsZ0JBQUEsU0FBQSxlQUFBOztJQUVBLE9BQUE7UUFDQSxXQUFBO1FBQ0EsT0FBQTtZQUNBLE9BQUE7O1FBRUEsV0FBQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7VUFDQSxLQUFBO1FBQ0EsTUFBQSxTQUFBLEtBQUEsT0FBQSxTQUFBLE9BQUE7WUFDQSxNQUFBLFFBQUEsTUFBQTtZQUNBLElBQUEsTUFBQSxRQUFBLFFBQUEsS0FBQSxXQUFBLFNBQUE7Ozs7O0FDckJBLElBQUEsTUFBQSxRQUFBLE9BQUE7O0FBRUEsSUFBQSxVQUFBLDBCQUFBLFNBQUEsV0FBQSxTQUFBOztJQUVBLE9BQUE7UUFDQSxXQUFBO1FBQ0EsT0FBQTtZQUNBLE1BQUE7O1FBRUEsV0FBQTtZQUNBO1VBQ0EsS0FBQTtRQUNBLE1BQUEsU0FBQSxLQUFBLE9BQUEsU0FBQSxPQUFBOztZQUVBLFFBQUEsS0FBQSxPQUFBLFNBQUEsTUFBQTs7WUFFQSxJQUFBLFlBQUEsTUFBQSxPQUFBLFlBQUE7Z0JBQ0EsT0FBQSxNQUFBO2VBQ0EsWUFBQTtnQkFDQSxJQUFBLENBQUEsTUFBQSxNQUFBO2dCQUNBLElBQUEsTUFBQSxZQUFBLE1BQUEsT0FBQSxRQUFBLGNBQUEsTUFBQSxNQUFBLE1BQUE7Z0JBQ0E7Ozs7Ozs7QUNyQkEsSUFBQSxNQUFBLFFBQUEsT0FBQTs7QUFFQSxJQUFBLFVBQUEsaUJBQUEsU0FBQSxnQkFBQTs7SUFFQSxPQUFBO1FBQ0EsV0FBQTtRQUNBLFdBQUE7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1VBQ0EsS0FBQTs7OztBQ3hCQSxJQUFBLE1BQUEsUUFBQSxPQUFBOztBQUVBLElBQUEsVUFBQSxTQUFBLFNBQUEsUUFBQTs7SUFFQSxPQUFBO1FBQ0EsV0FBQTtRQUNBLE9BQUE7UUFDQSxXQUFBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtVQUNBLEtBQUE7UUFDQSxNQUFBLFNBQUEsS0FBQSxPQUFBLFNBQUEsT0FBQTtZQUNBLE1BQUEsT0FBQSxNQUFBO1lBQ0EsTUFBQSxRQUFBLE1BQUE7Ozs7O0FDbkJBLElBQUEsTUFBQSxRQUFBLE9BQUE7O0FBRUEsSUFBQSxVQUFBLGlCQUFBLFNBQUEsZ0JBQUE7O0lBRUEsT0FBQTtRQUNBLFdBQUE7UUFDQSxPQUFBO1lBQ0EsUUFBQTs7UUFFQSxXQUFBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtVQUNBLEtBQUE7UUFDQSxNQUFBLFNBQUEsS0FBQSxPQUFBOztZQUVBLE1BQUEsYUFBQSxTQUFBLGFBQUE7Z0JBQ0EsSUFBQSxDQUFBLE1BQUEsUUFBQTtnQkFDQSxNQUFBLFFBQUEsS0FBQTs7Ozs7OztBQzFCQSxJQUFBLE1BQUEsUUFBQSxPQUFBOztBQUVBLElBQUEsVUFBQSxzQkFBQSxTQUFBLHFCQUFBOztJQUVBLE9BQUE7UUFDQSxXQUFBO1FBQ0EsT0FBQTtRQUNBLFdBQUE7WUFDQTtZQUNBO1lBQ0E7VUFDQSxLQUFBO1FBQ0EsTUFBQSxTQUFBLEtBQUEsT0FBQSxTQUFBLE9BQUE7WUFDQSxNQUFBLE9BQUEsTUFBQTtZQUNBLElBQUEsTUFBQSxRQUFBLFFBQUEsS0FBQSxXQUFBLFNBQUE7Ozs7O0FDZEEsSUFBQSxNQUFBLFFBQUEsT0FBQTs7QUFFQSxJQUFBLFVBQUEsbUJBQUEsU0FBQSxrQkFBQTs7SUFFQSxPQUFBO1FBQ0EsV0FBQTtRQUNBLE9BQUE7WUFDQSxNQUFBOztRQUVBLFdBQUE7WUFDQTtZQUNBO1lBQ0E7WUFDQTtVQUNBLEtBQUE7UUFDQSxNQUFBLFNBQUEsS0FBQSxPQUFBLFNBQUEsT0FBQTtZQUNBLE1BQUEsT0FBQSxNQUFBO1lBQ0EsSUFBQSxNQUFBLFFBQUEsUUFBQSxLQUFBLFFBQUEsU0FBQTs7Ozs7O0FDakJBLElBQUEsTUFBQSxRQUFBLE9BQUE7O0FBRUEsSUFBQSxVQUFBLGVBQUEsU0FBQSxjQUFBOztJQUVBLE9BQUE7UUFDQSxXQUFBO1FBQ0EsVUFBQTtRQUNBLE9BQUE7WUFDQSxNQUFBOztRQUVBLFdBQUE7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1VBQ0EsS0FBQTs7OztBQ3JDQSxJQUFBLE1BQUEsUUFBQSxPQUFBOztBQUVBLElBQUEsVUFBQSxhQUFBLFNBQUEsWUFBQTs7SUFFQSxPQUFBO1FBQ0EsV0FBQTtRQUNBLE9BQUE7WUFDQSxPQUFBOztRQUVBLFdBQUE7WUFDQTtZQUNBO1lBQ0E7VUFDQSxLQUFBO1FBQ0EsTUFBQSxTQUFBLEtBQUEsT0FBQSxTQUFBLE9BQUE7WUFDQSxNQUFBLE9BQUEsTUFBQTs7Ozs7QUNmQSxJQUFBLE1BQUEsUUFBQSxPQUFBOztBQUVBLElBQUEsVUFBQSx3Q0FBQSxTQUFBLFdBQUEsUUFBQSxhQUFBOztJQUVBLE9BQUE7UUFDQSxXQUFBO1FBQ0EsT0FBQTtZQUNBLE9BQUE7O1FBRUEsV0FBQTtZQUNBO1lBQ0E7WUFDQTtVQUNBLEtBQUE7UUFDQSxNQUFBLFNBQUEsS0FBQSxPQUFBOztZQUVBLElBQUEsTUFBQSxNQUFBLFNBQUEsU0FBQSxRQUFBO2dCQUNBLElBQUEsTUFBQSxZQUFBLE1BQUEsTUFBQSxNQUFBLFNBQUEsVUFBQTtnQkFDQSxPQUFBLFVBQUEsS0FBQSxLQUFBLFVBQUEsVUFBQTtvQkFDQSxNQUFBLE1BQUEsT0FBQSxZQUFBLFlBQUEsTUFBQSxTQUFBLE9BQUE7O21CQUVBLElBQUEsTUFBQSxNQUFBLFNBQUEsU0FBQSxNQUFBLE1BQUEsU0FBQSxNQUFBLFFBQUE7Z0JBQ0EsTUFBQSxNQUFBLFlBQUEsTUFBQSxNQUFBLE1BQUEsU0FBQSxPQUFBOzs7Ozs7O0FDdEJBLElBQUEsTUFBQSxRQUFBLE9BQUE7O0FBRUEsSUFBQSxVQUFBLFNBQUEsU0FBQSxRQUFBOztJQUVBLE9BQUE7UUFDQSxXQUFBO1FBQ0EsT0FBQTtZQUNBLE9BQUE7O1FBRUEsV0FBQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtVQUNBLEtBQUE7OztHQUdBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnLCBbXSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwLnZpZXdzJywgW10pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25zdGFudHMnLCBbXSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbJ2luZmluaXRlLXNjcm9sbCcsICdhcHAuZmlsdGVycyddKTtcbmFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnLCBbJ2FwcC5jb25zdGFudHMnLCAnbmdSZXNvdXJjZSddKTtcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ2FwcC5zZXJ2aWNlcycsICdhcHAuZGlyZWN0aXZlcycsICdhcHAudmlld3MnLCAnYXBwLmZpbHRlcnMnLCAnbmdSb3V0ZSddKTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7IHRlbXBsYXRlVXJsIDogJ3Byb2ZpbGUtZGV0YWlscy5odG1sJyB9KTtcbn0pO1xuIiwiLyogZ2xvYmFscyBhbmd1bGFyOmZhbHNlICovXG5cbnZhciBjb25zdGFudHM7XG5jb25zdGFudHMgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnN0YW50cycpO1xuXG5jb25zdGFudHMuY29uc3RhbnQoJ0ZMSUNLUl9BUEknLCAnaHR0cHM6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9yZXN0LycpO1xuXG5jb25zdGFudHMuY29uc3RhbnQoJ0ZMSUNLUl9LRVknLCAnMmZmOTU4MjY0ZDBmMjg1YmVhYzUyYjUxYTNmZDIyNDcnKTtcbiIsIi8qIGdsb2JhbHMgYW5ndWxhcjpmYWxzZSAqL1xuXG52YXIgY29uc3RhbnRzO1xuY29uc3RhbnRzID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25zdGFudHMnKTtcblxuY29uc3RhbnRzLmNvbnN0YW50KCdUV0lUVEVSX0FQSScsICdodHRwOi8vbG9jYWxob3N0OjMwMDAnKTtcblxuY29uc3RhbnRzLmNvbnN0YW50KCdUV0lUVEVSX1FVQU5USVRZX1RXRUVUU19HRVQnLCAxMCk7XG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5jb250cm9sbGVyKCdwcm9maWxlRGV0YWlsc0NvbnRyb2xsZXInLCBmdW5jdGlvbiBwcm9maWxlRGV0YWlsc0NvbnRyb2xsZXIoJHEsIGhlbHBTZXJ2aWNlLCB0d2l0dGVyKSB7XG5cbiAgICAkcS5hbGwoW3R3aXR0ZXIuZ2V0VHdlZXRzKCksIHR3aXR0ZXIuZ2V0VXNlcigpXSkudGhlbihoZWxwU2VydmljZS5zcHJlYWQoZnVuY3Rpb24gKHR3ZWV0cywgdXNlcikge1xuICAgICAgICB0aGlzLnR3ZWV0cyA9IHR3ZWV0cztcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcbiAgICB9LmJpbmQodGhpcykpKTtcblxuICAgIHRoaXMubW9yZVR3ZWV0cyA9IGZ1bmN0aW9uIG1vcmVUd2VldHMoKSB7XG4gICAgICAgIHR3aXR0ZXIubW9yZVR3ZWV0cyh0aGlzLnR3ZWV0cyk7XG4gICAgfTtcblxufSk7IiwidmFyIGZpbHRlcnMgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnKTtcblxuZmlsdGVycy5maWx0ZXIoJ2hhc2h0YWcnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGhhc2gpIHtcbiAgICAgICAgcmV0dXJuIGhhc2ggPyAnIycgKyBoYXNoIDogJyc7XG4gICAgfTtcbn0pOyIsInZhciBmaWx0ZXJzID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJyk7XG5cbmZpbHRlcnMuZmlsdGVyKCdyZW1vdmVUZXh0JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0ZXh0LCByZW1vdmUpIHtcbiAgICAgICAgcmV0dXJuIHRleHQgPyB0ZXh0LnJlcGxhY2UocmVtb3ZlLCAnJykgOiAnJztcbiAgICB9O1xufSk7IiwidmFyIGZpbHRlcnMgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnKTtcblxuZmlsdGVycy5maWx0ZXIoJ3NjcmVlbk5hbWUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHVzZXJTY3JlZW5OYW1lKSB7XG4gICAgICAgIHJldHVybiB1c2VyU2NyZWVuTmFtZSA/ICdAJyArIHVzZXJTY3JlZW5OYW1lIDogJyc7XG4gICAgfTtcbn0pOyIsIi8qIGdsb2JhbHMgYW5ndWxhcjpmYWxzZSAqL1xuXG52YXIgc2VydmljZXM7XG5zZXJ2aWNlcyA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKTtcblxuc2VydmljZXMuZmFjdG9yeSgnRmxpY2tyU2VydmljZScsIGZ1bmN0aW9uIEZsaWNrclNlcnZpY2UoJHJlc291cmNlLCBGTElDS1JfQVBJLCBGTElDS1JfS0VZKSB7XG4gICAgcmV0dXJuICRyZXNvdXJjZShGTElDS1JfQVBJLCB7fSwge1xuICAgICAgICBwaG90b3M6IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IEZMSUNLUl9BUEksXG4gICAgICAgICAgICBpc0FycmF5OiBmYWxzZSxcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ2ZsaWNrci5waG90b3Muc2VhcmNoJyxcbiAgICAgICAgICAgICAgICBhcGlfa2V5OiBGTElDS1JfS0VZLFxuICAgICAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAgICAgICAgbm9qc29uY2FsbGJhY2s6IDEsXG4gICAgICAgICAgICAgICAgcGVyX3BhZ2U6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbnNlcnZpY2VzLmZhY3RvcnkoJ2ZsaWNrcicsIGZ1bmN0aW9uIGZsaWNrcihGbGlja3JTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGhvdG9zOiBmdW5jdGlvbiBnZXRQaG90b3ModGFncykge1xuICAgICAgICAgICAgcmV0dXJuIEZsaWNrclNlcnZpY2UucGhvdG9zKHsgdGFnczogdGFncyB9KS4kcHJvbWlzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGhvdG9Vcmw6IGZ1bmN0aW9uIGdldFBob3RvVXJsKHBob3RvKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vZmFybScgKyBwaG90by5mYXJtICsgJy5zdGF0aWNmbGlja3IuY29tLycgKyBwaG90by5zZXJ2ZXIgKyAnLycgKyBwaG90by5pZCArICdfJyArIHBob3RvLnNlY3JldCArICcuanBnJztcbiAgICAgICAgfVxuICAgIH1cbn0pOyIsInZhciBzZXJ2aWNlcztcbnNlcnZpY2VzID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpO1xuXG5zZXJ2aWNlcy5mYWN0b3J5KCdoZWxwU2VydmljZScsIGZ1bmN0aW9uIGhlbHBTZXJ2aWNlKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmlyc3Q6IGZ1bmN0aW9uIGZpcnN0KGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uWzBdO1xuICAgICAgICB9LFxuICAgICAgICBsYXN0OiBmdW5jdGlvbiBsYXN0KGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uW2NvbGxlY3Rpb24ubGVuZ3RoIC0gMV07XG4gICAgICAgIH0sXG4gICAgICAgIHJhbmRvbTogZnVuY3Rpb24gcmFtZG9tKGxpbU1heCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBsaW1NYXgpICsgMSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNwcmVhZDogZnVuY3Rpb24gc3ByZWFkKGZ1bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFycmF5KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbn0pOyIsIi8qIGdsb2JhbHMgYW5ndWxhcjpmYWxzZSAqL1xuXG52YXIgc2VydmljZXM7XG5zZXJ2aWNlcyA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKTtcblxuc2VydmljZXMuZmFjdG9yeSgnVHdpdHRlclNlcnZpY2UnLCBmdW5jdGlvbiBUd2l0dGVyU2VydmljZSgkcmVzb3VyY2UsIFRXSVRURVJfQVBJKSB7XG4gICAgcmV0dXJuICRyZXNvdXJjZShUV0lUVEVSX0FQSSwge30sIHtcbiAgICAgICAgdHdlZXRzOiB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBUV0lUVEVSX0FQSSArICcvdHdlZXRzJyxcbiAgICAgICAgICAgIGlzQXJyYXk6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogVFdJVFRFUl9BUEkgKyAnL3VzZXInLFxuICAgICAgICAgICAgaXNBcnJheTogZmFsc2VcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbnNlcnZpY2VzLmZhY3RvcnkoJ3R3aXR0ZXInLCBmdW5jdGlvbiB0d2l0dGVyKGhlbHBTZXJ2aWNlLCBUd2l0dGVyU2VydmljZSwgVFdJVFRFUl9RVUFOVElUWV9UV0VFVFNfR0VUKSB7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgICAgX3JlYWRpbmdUd2VldHM6IGZhbHNlLFxuICAgICAgICBtb3JlVHdlZXRzOiBmdW5jdGlvbiBtb3JlVHdlZXRzKGFycmF5VHdlZXRzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVhZGluZ1R3ZWV0cykgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIG1heF9pZCA9IChoZWxwU2VydmljZS5sYXN0KGFycmF5VHdlZXRzKSkuaWQ7XG4gICAgICAgICAgICB0aGlzLl9yZWFkaW5nVHdlZXRzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZ2V0VHdlZXRzKFRXSVRURVJfUVVBTlRJVFlfVFdFRVRTX0dFVCArIDEsIG1heF9pZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHJlc3BvbnNlLmxlbmd0aDsgaW5kZXgrKykgYXJyYXlUd2VldHMucHVzaChyZXNwb25zZVtpbmRleF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlYWRpbmdUd2VldHMgPSBmYWxzZTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVhZGluZ1R3ZWV0cyA9IGZhbHNlO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VHdlZXRzOiBmdW5jdGlvbihjb3VudCwgbWF4SWQpIHtcbiAgICAgICAgICAgIGlmICghY291bnQpIGNvdW50ID0gVFdJVFRFUl9RVUFOVElUWV9UV0VFVFNfR0VUO1xuICAgICAgICAgICAgcmV0dXJuIFR3aXR0ZXJTZXJ2aWNlLnR3ZWV0cyh7IGNvdW50OiBjb3VudCwgbWF4X2lkOiBtYXhJZCB9KS4kcHJvbWlzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBUd2l0dGVyU2VydmljZS51c2VyKCkuJHByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pO1xuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xuXG5hcHAuZGlyZWN0aXZlKCdmb2xsb3dlcnNLbm93JywgZnVuY3Rpb24gZm9sbG93ZXJzS25vdygpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICB0ZW1wbGF0ZSA6IFtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29sLW1kLTMgcHJvZmlsZS1waG90b3NcIj4nLFxuICAgICAgICAgICAgJyAgIDxpbWcgY2xhc3M9XCJwcm9maWxlLXBob3Rvcy1pbWdcIiBzcmM9XCJpbWFnZXMvZm9sbG93ZXJzLWtub3cucG5nXCIgLz4nLFxuICAgICAgICAgICAgJzwvZGl2PidcbiAgICAgICAgXS5qb2luKCcnKVxuICAgIH07XG5cbn0pOyIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcblxuYXBwLmRpcmVjdGl2ZSgncHJvZmlsZUZvbGxvd2Vyc0tub3cnLCBmdW5jdGlvbiBwcm9maWxlRm9sbG93ZXJzS25vdygpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxzZWN0aW9uIGNsYXNzPVwicHJvZmlsZS1waG90b3MtY29udGFpbmVyXCI+JyxcbiAgICAgICAgICAgICcgICA8aGVhZGVyIGNsYXNzPVwicHJvZmlsZS1waG90b3MtaGVhZGVyXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgPHNwYW4+PGkgY2xhc3M9XCJmYSBmYS11c2VyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiB7eyBjdHJsLmZvbGxvd2Vycy5sZW5ndGggfX0gRm9sbG93ZXJzIHlvdSBrbm93PC9zcGFuPicsXG4gICAgICAgICAgICAnICAgPC9oZWFkZXI+JyxcbiAgICAgICAgICAgICcgICA8c2VjdGlvbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8Zm9sbG93ZXJzLWtub3cgbmctcmVwZWF0PVwiZm9sbG93IGluIGN0cmwuZm9sbG93ZXJzIHRyYWNrIGJ5ICRpbmRleFwiPjwvZm9sbG93ZXJzLWtub3c+JyxcbiAgICAgICAgICAgICcgICA8L3NlY3Rpb24+JyxcbiAgICAgICAgICAgICc8L3NlY3Rpb24+J1xuICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gcHJvZmlsZUZvbGxvd2Vyc0tub3dDb250cm9sbGVyKGhlbHBTZXJ2aWNlKSB7XG5cbiAgICAgICAgICAgIHRoaXMuZm9sbG93ZXJzID0gbmV3IEFycmF5KGhlbHBTZXJ2aWNlLnJhbmRvbSgxNikpO1xuXG4gICAgICAgIH1cbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ25hdmJhckljb24nLCBmdW5jdGlvbiBuYXZiYXJJY29uKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxpIGNsYXNzPVwiZmEgZmEtMnggZmEtdHdpdHRlciBuYXZiYXItaWNvblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nXG4gICAgICAgIF0uam9pbignJylcbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ25hdmJhck9wdGlvbicsIGZ1bmN0aW9uIG5hdmJhck9wdGlvbigpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxsaT4nLFxuICAgICAgICAgICAgJyAgIDxhIGhyZWY9XCIjXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWhvbWVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICcgICAgICAge3sgdGl0bGUgfX0nLFxuICAgICAgICAgICAgJyAgIDwvYT4nLFxuICAgICAgICAgICAgJzwvbGk+J1xuICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUudGl0bGUgPSBhdHRycy50aXRsZTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pOyIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcblxuYXBwLmRpcmVjdGl2ZSgnbmF2YmFyU2VhcmNoJywgZnVuY3Rpb24gbmF2YmFyU2VhcmNoKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxmb3JtPicsXG4gICAgICAgICAgICAnICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgbW9kLXNlYXJjaFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIFR3aXR0ZXJcIiAvPicsXG4gICAgICAgICAgICAnPC9mb3JtPidcbiAgICAgICAgXS5qb2luKCcnKVxuICAgIH07XG5cbn0pOyIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcblxuYXBwLmRpcmVjdGl2ZSgncGhvdG9zVmlkZW9zJywgZnVuY3Rpb24gcGhvdG9zVmlkZW9zKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb2wtbWQtNCBwcm9maWxlLXBob3Rvc1wiPicsXG4gICAgICAgICAgICAnICAgPGltZyBjbGFzcz1cInByb2ZpbGUtcGhvdG9zLWltZ1wiIHNyYz1cImltYWdlcy9waG90by1hbmQtdmlkZW9zLmpwZ1wiIC8+JyxcbiAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIF0uam9pbignJylcbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ3Byb2ZpbGVQaG90b3NWaWRlb3MnLCBmdW5jdGlvbiBwcm9maWxlUGhvdG9zVmlkZW9zKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgdGVtcGxhdGUgOiBbXG4gICAgICAgICAgICAnPHNlY3Rpb24gY2xhc3M9XCJwcm9maWxlLXBob3Rvcy1jb250YWluZXJcIj4nLFxuICAgICAgICAgICAgJyAgIDxoZWFkZXIgY2xhc3M9XCJwcm9maWxlLXBob3Rvcy1oZWFkZXJcIj4nLFxuICAgICAgICAgICAgJyAgICAgICA8c3Bhbj48aSBjbGFzcz1cImZhIGZhLWNhbWVyYVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4ge3sgY3RybC5waG90b3MubGVuZ3RoIH19IHBob3RvcyBhbmQgdmlkZW9zPC9zcGFuPicsXG4gICAgICAgICAgICAnICAgPC9oZWFkZXI+JyxcbiAgICAgICAgICAgICcgICA8c2VjdGlvbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8cGhvdG9zLXZpZGVvcyBuZy1yZXBlYXQ9XCJwaG90byBpbiBjdHJsLnBob3RvcyB0cmFjayBieSAkaW5kZXhcIj48L3Bob3Rvcy12aWRlb3M+JyxcbiAgICAgICAgICAgICcgICA8L3NlY3Rpb24+JyxcbiAgICAgICAgICAgICc8L3NlY3Rpb24+J1xuICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gcHJvZmlsZVBob3Rvc1ZpZGVvc0NvbnRyb2xsZXIoaGVscFNlcnZpY2UpIHtcblxuICAgICAgICAgICAgdGhpcy5waG90b3MgPSBuZXcgQXJyYXkoaGVscFNlcnZpY2UucmFuZG9tKDkpKTtcblxuICAgICAgICB9XG4gICAgfTtcblxufSk7IiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xuXG5hcHAuZGlyZWN0aXZlKCdwcm9maWxlQ291bnQnLCBmdW5jdGlvbiBwcm9maWxlQ291bnQoKSB7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGNvdW50OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGUgOiBbXG4gICAgICAgICAgICAnICAgPGFydGljbGUgY2xhc3M9XCJwcm9maWxlLWNvdW50XCI+JyxcbiAgICAgICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPicsXG4gICAgICAgICAgICAnICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2ZpbGUtY291bnQtdGl0bGVcIj57eyB0aXRsZSB9fTwvc3Bhbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8L2Rpdj4nLFxuICAgICAgICAgICAgJyAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+JyxcbiAgICAgICAgICAgICcgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZmlsZS1jb3VudC1kYXRhXCI+e3sgY291bnQgfX08L3NwYW4+JyxcbiAgICAgICAgICAgICcgICAgICAgPC9kaXY+JyxcbiAgICAgICAgICAgICcgICA8L2FydGljbGU+J1xuICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUudGl0bGUgPSBhdHRycy50aXRsZTtcbiAgICAgICAgICAgIGlmIChhdHRycy5hY3RpdmUpIGVsZW1lbnQuZmluZCgnYXJ0aWNsZScpLmFkZENsYXNzKCdtb2QtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ3Byb2ZpbGVJbWcnLCBmdW5jdGlvbiBwcm9maWxlSW1nKCRmaWx0ZXIpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgbGluazogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxpbWcgbmctc3JjPVwie3sgbGluayB9fVwiIC8+J1xuICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgICAgICBlbGVtZW50LmZpbmQoJ2ltZycpLmFkZENsYXNzKGF0dHJzLmNsYXNzSW1nKTtcblxuICAgICAgICAgICAgdmFyIHN0b3BXYXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLmxpbms7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzY29wZS5saW5rKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJzLnJlbW92ZVRleHQpIHNjb3BlLmxpbmsgPSAkZmlsdGVyKCdyZW1vdmVUZXh0Jykoc2NvcGUubGluaywgYXR0cnMucmVtb3ZlVGV4dCk7XG4gICAgICAgICAgICAgICAgc3RvcFdhdGNoKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgfTtcblxufSk7IiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xuXG5hcHAuZGlyZWN0aXZlKCdwcm9maWxlVHJlbmRzJywgZnVuY3Rpb24gcHJvZmlsZVRyZW5kcygpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICB0ZW1wbGF0ZSA6IFtcbiAgICAgICAgICAgICc8c2VjdGlvbiBjbGFzcz1cInByb2ZpbGUtdHJlbmRzLWNvbnRhaW5lciBjb2wtbWQtMTJcIj4nLFxuICAgICAgICAgICAgJyAgIDxoZWFkZXIgY2xhc3M9XCJwcm9maWxlLXRyZW5kcy1jb250YWluZXItaGVhZGVyXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgVHJlbmRzJyxcbiAgICAgICAgICAgICcgICA8L2hlYWRlcj4nLFxuICAgICAgICAgICAgJyAgIDxzZWN0aW9uPicsXG4gICAgICAgICAgICAnICAgICAgIDx0cmVuZCBoYXNoPVwiQW5ndWxhckpTXCIgY291bnQ9XCIyLDE0N1wiPjwvdHJlbmQ+JyxcbiAgICAgICAgICAgICcgICAgICAgPHRyZW5kIGhhc2g9XCJSZWFjdFwiIGNvdW50PVwiNCwzMDNcIj48L3RyZW5kPicsXG4gICAgICAgICAgICAnICAgICAgIDx0cmVuZCBoYXNoPVwiRmVsaXBwZU5hQjJXXCIgY291bnQ9XCIxLDkwNlwiPjwvdHJlbmQ+JyxcbiAgICAgICAgICAgICcgICAgICAgPHRyZW5kIGhhc2g9XCJCMldEaWdpdGFsXCIgY291bnQ9XCI3LDk4N1wiPjwvdHJlbmQ+JyxcbiAgICAgICAgICAgICcgICAgICAgPHRyZW5kIGhhc2g9XCJGcm9udEVuZENhcmlvY2FcIiBjb3VudD1cIjIwOFwiPjwvdHJlbmQ+JyxcbiAgICAgICAgICAgICcgICAgICAgPHRyZW5kIGhhc2g9XCJGcm9udEluUmlvXCIgY291bnQ9XCIyNDNcIj48L3RyZW5kPicsXG4gICAgICAgICAgICAnICAgICAgIDx0cmVuZCBoYXNoPVwiU3VibWFyaW5vQ29tXCIgY291bnQ9XCI4Niw0NTZcIj48L3RyZW5kPicsXG4gICAgICAgICAgICAnICAgICAgIDx0cmVuZCBoYXNoPVwiQmxhY2tGcmlkYXlcIiBjb3VudD1cIjM0N1wiPjwvdHJlbmQ+JyxcbiAgICAgICAgICAgICcgICAgICAgPHRyZW5kIGhhc2g9XCJCMldJbnRlcnZpZXdcIiBjb3VudD1cIjksNjUxXCI+PC90cmVuZD4nLFxuICAgICAgICAgICAgJyAgICAgICA8dHJlbmQgaGFzaD1cIkphdmFTY3JpcHRTMlwiIGNvdW50PVwiMjM0XCI+PC90cmVuZD4nLFxuICAgICAgICAgICAgJyAgIDwvc2VjdGlvbj4nLFxuICAgICAgICAgICAgJzwvc2VjdGlvbj4nXG4gICAgICAgIF0uam9pbignJylcbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ3RyZW5kJywgZnVuY3Rpb24gdHJlbmQoKSB7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICB0ZW1wbGF0ZSA6IFtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29sLW1kLTEyIHByb2ZpbGUtdHJlbmRcIj4nLFxuICAgICAgICAgICAgJyAgIDxkaXYgY2xhc3M9XCJyb3dcIj4nLFxuICAgICAgICAgICAgJyAgICAgICA8c3BhbiBjbGFzcz1cInByb2ZpbGUtdHJlbmQtaGFzaHRhZ1wiPnt7IGhhc2ggfCBoYXNodGFnIH19PC9zcGFuPicsXG4gICAgICAgICAgICAnICAgPC9kaXY+JyxcbiAgICAgICAgICAgICcgICA8ZGl2IGNsYXNzPVwicm93XCI+JyxcbiAgICAgICAgICAgICcgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9maWxlLXRyZW5kLWNvdW50XCI+e3sgY291bnQgfX0gVHdlZXRzPC9zcGFuPicsXG4gICAgICAgICAgICAnICAgPC9kaXY+JyxcbiAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIF0uam9pbignJyksXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS5oYXNoID0gYXR0cnMuaGFzaDtcbiAgICAgICAgICAgIHNjb3BlLmNvdW50ID0gYXR0cnMuY291bnQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ3Byb2ZpbGVUd2VldHMnLCBmdW5jdGlvbiBwcm9maWxlVHdlZXRzKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICB0d2VldHM6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZSA6IFtcbiAgICAgICAgICAgICc8c2VjdGlvbiBjbGFzcz1cImNvbC1tZC0xMiBjb2wtc20tMTIgY29sLXhzLTEyIHByb2ZpbGUtdHdlZXRzLWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAnICAgPGhlYWRlciBjbGFzcz1cInByb2ZpbGUtdHdlZXRzLWhlYWRlclwiPicsXG4gICAgICAgICAgICAnICAgICAgIDx0d2VldHMtaGVhZGVyLW9wdGlvbiB0ZXh0PVwiVHdlZXRzXCI+PC90d2VldHMtaGVhZGVyLW9wdGlvbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8dHdlZXRzLWhlYWRlci1vcHRpb24gdGV4dD1cIlR3ZWV0cyAmIHJlcGxpZXNcIiBhY3RpdmU9XCJ0cnVlXCI+PC90d2VldHMtaGVhZGVyLW9wdGlvbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8dHdlZXRzLWhlYWRlci1vcHRpb24gdGV4dD1cIk1lZGlhXCI+PC90d2VldHMtaGVhZGVyLW9wdGlvbj4nLFxuICAgICAgICAgICAgJyAgIDwvaGVhZGVyPicsXG4gICAgICAgICAgICAnICAgPHNlY3Rpb24+JyxcbiAgICAgICAgICAgICcgICAgICAgPHR3ZWV0IG5nLXJlcGVhdD1cInR3ZWV0IGluIHR3ZWV0cyB0cmFjayBieSAkaW5kZXhcIiB0d2VldD1cInR3ZWV0XCI+PC90d2VldD4nLFxuICAgICAgICAgICAgJyAgIDwvc2VjdGlvbj4nLFxuICAgICAgICAgICAgJyAgIDxkaXYgaW5maW5pdGUtc2Nyb2xsPVwibW9yZVR3ZWV0cygpXCIgaW5maW5pdGUtc2Nyb2xsLWRpc3RhbmNlPVwiMFwiPjwvZGl2PicsXG4gICAgICAgICAgICAnPC9zZWN0aW9uPidcbiAgICAgICAgXS5qb2luKCcnKSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSkge1xuXG4gICAgICAgICAgICBzY29wZS5tb3JlVHdlZXRzID0gZnVuY3Rpb24gbW9yZVR3ZWV0cygpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNjb3BlLnR3ZWV0cykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRwYXJlbnQuY3RybC5tb3JlVHdlZXRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ3R3ZWV0c0hlYWRlck9wdGlvbicsIGZ1bmN0aW9uIHR3ZWV0c0hlYWRlck9wdGlvbigpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICBzY29wZToge30sXG4gICAgICAgIHRlbXBsYXRlIDogW1xuICAgICAgICAgICAgJzxzZWN0aW9uIGNsYXNzPVwicHJvZmlsZS10d2VldHMtb3B0aW9uXCI+JyxcbiAgICAgICAgICAgICcgICA8c3Bhbj57eyB0ZXh0IH19PC9zcGFuPicsXG4gICAgICAgICAgICAnPC9zZWN0aW9uPidcbiAgICAgICAgXS5qb2luKCcnKSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHNjb3BlLnRleHQgPSBhdHRycy50ZXh0O1xuICAgICAgICAgICAgaWYgKGF0dHJzLmFjdGl2ZSkgZWxlbWVudC5maW5kKCdzZWN0aW9uJykuYWRkQ2xhc3MoJ21vZC1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pOyIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcblxuYXBwLmRpcmVjdGl2ZSgncHJvZmlsZUluZm9JY29uJywgZnVuY3Rpb24gcHJvZmlsZUluZm9JY29uKCkge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICB0ZXh0OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGUgOiBbXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJvdyBwcm9maWxlLWluZm8tbmFtZSBwcm9maWxlLWluZm8tZGF0YVwiPicsXG4gICAgICAgICAgICAnICAgPGkgY2xhc3M9XCJmYVwiIG5nLWNsYXNzPVwiaWNvblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxuICAgICAgICAgICAgJyAgIDxzcGFuPnt7IHRleHQgfX08L3NwYW4+JyxcbiAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIF0uam9pbignJyksXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBzY29wZS5pY29uID0gYXR0cnMuaWNvbjtcbiAgICAgICAgICAgIGlmIChhdHRycy5pc0xpbmspIGVsZW1lbnQuZmluZCgnc3BhbicpLmFkZENsYXNzKCdwcm9maWxlLWluZm8tZGVzY3JpcHRpb24tdXJsJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KTtcbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcblxuYXBwLmRpcmVjdGl2ZSgncHJvZmlsZUluZm8nLCBmdW5jdGlvbiBwcm9maWxlSW5mbygpIHtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgICBwcmlvcml0eTogMSxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHVzZXI6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZSA6IFtcbiAgICAgICAgICAgICc8c2VjdGlvbiBjbGFzcz1cInByb2ZpbGUtaW5mby1jb250YWluZXJcIj4nLFxuICAgICAgICAgICAgJyAgIDxhcnRpY2xlPicsXG4gICAgICAgICAgICAnICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgcHJvZmlsZS1pbmZvLW5hbWVcIj4nLFxuICAgICAgICAgICAgJyAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9maWxlLWluZm8tbmFtZS10aXRsZVwiPnt7IHVzZXIubmFtZSB9fTwvc3Bhbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8L2Rpdj4nLFxuICAgICAgICAgICAgJyAgICAgICA8ZGl2IGNsYXNzPVwicm93IHByb2ZpbGUtaW5mby1uYW1lXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZmlsZS1pbmZvLW5hbWUtYXRcIj57eyB1c2VyLnNjcmVlbl9uYW1lIHwgc2NyZWVuTmFtZSB9fTwvc3Bhbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8L2Rpdj4nLFxuICAgICAgICAgICAgJyAgIDwvYXJ0aWNsZT4nLFxuICAgICAgICAgICAgJyAgIDxhcnRpY2xlIGNsYXNzPVwicHJvZmlsZS1pbmZvLWRlc2NyaXB0aW9uLWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAnICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgcHJvZmlsZS1pbmZvLW5hbWVcIj4nLFxuICAgICAgICAgICAgJyAgICAgICAgICAgPHNwYW4+e3sgdXNlci5kZXNjcmlwdGlvbiB9fTwvc3Bhbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8L2Rpdj4nLFxuICAgICAgICAgICAgJyAgIDwvYXJ0aWNsZT4nLFxuICAgICAgICAgICAgJyAgIDxhcnRpY2xlIGNsYXNzPVwicHJvZmlsZS1pbmZvLWRlc2NyaXB0aW9uLWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAnICAgICAgIDxwcm9maWxlLWluZm8taWNvbiBpY29uPVwiZmEtbWFwLW1hcmtlclwiIHRleHQ9XCJ1c2VyLmxvY2F0aW9uXCI+PC9wcm9maWxlLWluZm8taWNvbj4nLFxuICAgICAgICAgICAgJyAgICAgICA8cHJvZmlsZS1pbmZvLWljb24gaWNvbj1cImZhLWxpbmtcIiB0ZXh0PVwidXNlci5uYW1lXCIgaXMtbGluaz1cInRydWVcIj48L3Byb2ZpbGUtaW5mby1pY29uPicsXG4gICAgICAgICAgICAnICAgICAgIDxwcm9maWxlLWluZm8taWNvbiBpY29uPVwiZmEtY2FsZW5kYXJcIiB0ZXh0PVwidXNlci5jcmVhdGVkX2F0XCI+PC9wcm9maWxlLWluZm8taWNvbj4nLFxuICAgICAgICAgICAgJyAgIDwvYXJ0aWNsZT4nLFxuICAgICAgICAgICAgJyAgIDxhcnRpY2xlIGNsYXNzPVwicHJvZmlsZS1pbmZvLWRlc2NyaXB0aW9uLWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAnICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXR3ZWV0IGJ0bi1mdWxsXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsLXNxdWFyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXG4gICAgICAgICAgICAnICAgICAgICAgICA8c3Bhbj5Ud2VldCB0byB7eyB1c2VyLm5hbWUgfX08L3NwYW4+JyxcbiAgICAgICAgICAgICcgICAgICAgPC9idXR0b24+JyxcbiAgICAgICAgICAgICcgICA8L2FydGljbGU+JyxcbiAgICAgICAgICAgICc8L3NlY3Rpb24+J1xuICAgICAgICBdLmpvaW4oJycpXG4gICAgfTtcblxufSk7IiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xuXG5hcHAuZGlyZWN0aXZlKCd0d2VldEljb24nLCBmdW5jdGlvbiB0d2VldEljb24oKSB7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGUgOiBbXG4gICAgICAgICAgICAnPGkgY2xhc3M9XCJmYVwiIG5nLWNsYXNzPVwiaWNvblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPicsXG4gICAgICAgICAgICAnICAgPHNwYW4gY2xhc3M9XCJ0d2VldC1tYWluLWljb25zLXZhbHVlXCIgbmctaWY9XCJ2YWx1ZVwiPnt7IHZhbHVlIH19PC9zcGFuPicsXG4gICAgICAgICAgICAnPC9pPidcbiAgICAgICAgXS5qb2luKCcnKSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHNjb3BlLmljb24gPSBhdHRycy5pY29uO1xuICAgICAgICB9XG4gICAgfTtcblxufSk7IiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xuXG5hcHAuZGlyZWN0aXZlKCd0d2VldEltYWdlJywgZnVuY3Rpb24gdHdlZXRJbWFnZShmbGlja3IsIGhlbHBTZXJ2aWNlKSB7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHR3ZWV0OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGUgOiBbXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJvd1wiIG5nLWlmPVwidXJsXCI+JyxcbiAgICAgICAgICAgICcgICA8aW1nIGNsYXNzPVwicHJvZmlsZS10d2VldC1pbWFnZVwiIG5nLXNyYz1cInt7IHVybCB9fVwiIC8+JyxcbiAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIF0uam9pbignJyksXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUpIHtcblxuICAgICAgICAgICAgaWYgKHNjb3BlLnR3ZWV0LmVudGl0aWVzLmhhc2h0YWdzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSBoZWxwU2VydmljZS5maXJzdChzY29wZS50d2VldC5lbnRpdGllcy5oYXNodGFncykudGV4dDtcbiAgICAgICAgICAgICAgICBmbGlja3IuZ2V0UGhvdG9zKHRhZykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudXJsID0gZmxpY2tyLmdldFBob3RvVXJsKGhlbHBTZXJ2aWNlLmZpcnN0KHJlc3BvbnNlLnBob3Rvcy5waG90bykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzY29wZS50d2VldC5lbnRpdGllcy5tZWRpYSAmJiBzY29wZS50d2VldC5lbnRpdGllcy5tZWRpYS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzY29wZS51cmwgPSBoZWxwU2VydmljZS5maXJzdChzY29wZS50d2VldC5lbnRpdGllcy5tZWRpYSkubWVkaWFfdXJsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9O1xuXG59KTsiLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XG5cbmFwcC5kaXJlY3RpdmUoJ3R3ZWV0JywgZnVuY3Rpb24gdHdlZXQoKSB7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHR3ZWV0OiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGUgOiBbXG4gICAgICAgICAgICAnPGFydGljbGUgY2xhc3M9XCJ0d2VldC1jb250YWluZXIgY29sLW1kLTEyIGNvbC1zbS0xMiBjb2wteHMtMTJcIj4nLFxuICAgICAgICAgICAgJyAgIDxhc2lkZSBjbGFzcz1cImNvbC1tZC0yIGNvbC1zbS0yIHR3ZWV0LWltZy1jb250YWluZXIgaGlkZGVuLXhzXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgPGltZyBjbGFzcz1cInR3ZWV0LWltZ1wiIG5nLXNyYz1cInt7IHR3ZWV0LnVzZXIucHJvZmlsZV9pbWFnZV91cmwgfX1cIiAvPicsXG4gICAgICAgICAgICAnICAgPC9hc2lkZT4nLFxuICAgICAgICAgICAgJyAgIDxtYWluIGNsYXNzPVwiY29sLW1kLTEwIGNvbC1zbS0xMCBjb2wteHMtMTAgdHdlZXQtbWFpbi1jb250YWluZXJcIj4nLFxuICAgICAgICAgICAgJyAgICAgICA8ZGl2IGNsYXNzPVwicm93IHR3ZWV0LW1haW4tcmVwbHlcIiBuZy1pZj1cInR3ZWV0LmVudGl0aWVzLnVzZXJfbWVudGlvbnMubGVuZ3RoXCI+JyxcbiAgICAgICAgICAgICcgICAgICAgICAgIDxzcGFuPjxpIGNsYXNzPVwiZmEgZmEtcmVwbHkgaGlkZGVuLXhzIGljb24tcmVwbHlcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+SW4gcmVwbHkgdG8ge3sgdHdlZXQuZW50aXRpZXMudXNlcl9tZW50aW9uc1swXS5uYW1lIH19PC9zcGFuPicsXG4gICAgICAgICAgICAnICAgICAgIDwvZGl2PicsXG4gICAgICAgICAgICAnICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdHdlZXQtbWFpbi1wcm9maWxlLWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAnICAgICAgICAgICA8c3BhbiBjbGFzcz1cInR3ZWV0LW1haW4tcHJvZmlsZS1uYW1lXCI+e3sgdHdlZXQudXNlci5uYW1lIH19PC9zcGFuPicsXG4gICAgICAgICAgICAnICAgICAgICAgICA8c3BhbiBjbGFzcz1cInR3ZWV0LW1haW4tcHJvZmlsZS1hdFwiPnt7IHR3ZWV0LnVzZXIuc2NyZWVuX25hbWUgfCBzY3JlZW5OYW1lIH19PC9zcGFuPicsXG4gICAgICAgICAgICAnICAgICAgIDwvZGl2PicsXG4gICAgICAgICAgICAnICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdHdlZXQtbWFpblwiPicsXG4gICAgICAgICAgICAnICAgICAgICAgICA8c3Bhbj57eyB0d2VldC50ZXh0IH19PC9zcGFuPicsXG4gICAgICAgICAgICAnICAgICAgIDwvZGl2PicsXG4gICAgICAgICAgICAnICAgICAgIDx0d2VldC1pbWFnZSB0d2VldD1cInR3ZWV0XCI+PC90d2VldC1pbWFnZT4nLFxuICAgICAgICAgICAgJyAgICAgICA8ZGl2IGNsYXNzPVwicm93IHR3ZWV0LW1haW4taWNvbnNcIj4nLFxuICAgICAgICAgICAgJyAgICAgICAgICAgPHR3ZWV0LWljb24gaWNvbj1cImZhLXJlcGx5XCIgdmFsdWU9XCJ0d2VldC5lbnRpdGllcy51c2VyX21lbnRpb25zLmxlbmd0aFwiPjwvdHdlZXQtaWNvbj4nLFxuICAgICAgICAgICAgJyAgICAgICAgICAgPHR3ZWV0LWljb24gaWNvbj1cImZhLXJldHdlZXRcIiB2YWx1ZT1cInR3ZWV0LnJldHdlZXRfY291bnRcIj48L3R3ZWV0LWljb24+JyxcbiAgICAgICAgICAgICcgICAgICAgICAgIDx0d2VldC1pY29uIGljb249XCJmYS1oZWFydFwiIHZhbHVlPVwidHdlZXQuZmF2b3JpdGVfY291bnRcIj48L3R3ZWV0LWljb24+JyxcbiAgICAgICAgICAgICcgICAgICAgICAgIDx0d2VldC1pY29uIGljb249XCJmYS1lbGxpcHNpcy1oXCI+PC90d2VldC1pY29uPicsXG4gICAgICAgICAgICAnICAgICAgIDwvZGl2PicsXG4gICAgICAgICAgICAnICAgPC9tYWluPicsXG4gICAgICAgICAgICAnPC9hcnRpY2xlPidcbiAgICAgICAgXS5qb2luKCcnKVxuICAgIH07XG5cbn0pOyJdfQ==
